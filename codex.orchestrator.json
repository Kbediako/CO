{
  "pipelines": [
    {
      "id": "diagnostics",
      "title": "Diagnostics Pipeline",
      "description": "Build, lint, test, and spec-guard the repository with grouped runner support.",
      "tags": ["diagnostics-primary", "diagnostics-secondary"],
      "stages": [
        {
          "kind": "command",
          "id": "build",
          "title": "npm run build",
          "command": "npm run build"
        },
        {
          "kind": "command",
          "id": "lint",
          "title": "npm run lint",
          "command": "npm run lint"
        },
        {
          "kind": "command",
          "id": "test",
          "title": "npm run test",
          "command": "npm run test"
        },
        {
          "kind": "command",
          "id": "spec-guard",
          "title": "node scripts/spec-guard.mjs --dry-run",
          "command": "node scripts/spec-guard.mjs --dry-run"
        }
      ]
    },
    {
      "id": "diagnostics-with-eval",
      "title": "Diagnostics Pipeline (with Eval Harness)",
      "description": "Build, lint, test, run evaluation harness, and verify specs for guardrail evidence capture.",
      "stages": [
        {
          "kind": "command",
          "id": "build",
          "title": "npm run build",
          "command": "npm run build"
        },
        {
          "kind": "command",
          "id": "lint",
          "title": "npm run lint",
          "command": "npm run lint"
        },
        {
          "kind": "command",
          "id": "test",
          "title": "npm run test",
          "command": "npm run test"
        },
        {
          "kind": "command",
          "id": "eval-test",
          "title": "npm run eval:test",
          "command": "npm run eval:test"
        },
        {
          "kind": "command",
          "id": "spec-guard",
          "title": "node scripts/spec-guard.mjs --dry-run",
          "command": "node scripts/spec-guard.mjs --dry-run"
        }
      ]
    },
    {
      "id": "tfgrpo-learning",
      "title": "TF-GRPO Learning Loop",
      "description": "Run three TF-GRPO epochs (~100 samples, train temp 0.7, eval temp 0.3, G>=2) and capture guardrail evidence.",
      "tags": ["tfgrpo-learning", "tfgrpo-learning-secondary"],
      "stages": [
        {
          "kind": "command",
          "id": "tfgrpo-loop",
          "title": "tfgrpo learning schedule (3 epochs, 100 samples)",
          "command": "TFGRPO_GROUP_SIZE=2 TFGRPO_REWARDERS=gt,relative TFGRPO_EPOCHS=3 TFGRPO_SAMPLE_SIZE=100 TFGRPO_TRAIN_TEMP=0.7 TFGRPO_EVAL_TEMP=0.3 node --loader ts-node/esm evaluation/harness/scripts/tfgrpo-runner.ts"
        },
        {
          "kind": "command",
          "id": "spec-guard",
          "title": "node scripts/spec-guard.mjs --dry-run",
          "command": "node scripts/spec-guard.mjs --dry-run"
        }
      ]
    }
  ]
}
