# Run Artifacts Directory

This directory stores per-task run manifests, transient logs, and reviewer-facing telemetry generated by the Codex Orchestrator and its MCP runner.

## Layout

- `.runs/0001/mcp/<run-id>/` — canonical artifact root for Task 0001 MCP executions. Each run contains:
  - `manifest.json` — per-command status, heartbeat metadata, resume token, and metrics bookkeeping (`metrics_recorded`).
  - `runner.log` — aggregated stdout/stderr from the MCP runner process.
  - `.heartbeat` — last heartbeat timestamp written every 10 seconds while the runner is active.
  - `.resume-token` — the 32-byte token required by `scripts/mcp-runner-start.sh --resume` to reattach to a run.
  - `<index>-<slug>.json` — raw tool responses captured for each command.
- `.runs/local-mcp/<run-id>/` — compatibility pointer re-created during each run/migration. When symlinks are not supported, the directory contains a JSON stub (`manifest.json`) with `redirect_to` and `manifest` fields.
- `.runs/0001/metrics.json` — JSON Lines stream appended after each run reaches a terminal state (success/failure/cancelled).
- `.runs/0001/metrics-summary.json` — aggregate statistics generated via `scripts/mcp-runner-metrics.js` (success rate, average duration, guardrail coverage).
- `.runs/0001/migrations/<timestamp>.log` — audit records produced by `scripts/mcp-runner-migrate.js` in either dry-run or execution mode.

## Notes

- All timestamps are stored in ISO 8601 format; heartbeat staleness is derived from `manifest.heartbeat_at` with a 30 second threshold.
- The MCP runner refuses to start if it cannot write both the task-scoped artifact root and the compatibility pointer.
- Resume events are tracked in `manifest.resume_events[]` with actor/reason metadata to help reviewers trace handoffs.
- Reviewers should cite `.runs/0001/metrics-summary.json` alongside the specific run manifest when validating checklist entries.
