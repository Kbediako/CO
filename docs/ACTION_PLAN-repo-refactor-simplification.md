# Action Plan - Repo Refactor Simplification (Task 0928)

## Status Snapshot
- Current Phase: Implementation complete
- Run Manifest Link: `.runs/0928-repo-refactor-simplification/cli/2025-12-31T13-53-53-066Z-26a878bb/manifest.json`
- Approvals / Escalations: record in `tasks/index.json`

## Evidence Notes
- `metrics.json` is NDJSON (one JSON object per line; parse line-by-line).
- `out/<task-id>/state.json` is generated by metrics aggregation.

## Milestones & Tasks
1. Planning + collateral
   - Draft PRD/tech spec/action plan/checklist.
   - Create mini-spec stub under `tasks/specs/`.
   - Update `tasks/index.json` and `docs/TASKS.md` mirrors.
   - Capture docs-review manifest (pre-implementation).
2. Pipeline config portability
   - Update dist commands in codex.orchestrator.json to use $CODEX_ORCHESTRATOR_PACKAGE_ROOT.
   - Switch optional spec-guard stages to specGuardRunner where needed.
3. Resolution simplification
   - Add package-root fallback config loading with source labeling.
   - Remove redundant built-in pipeline TS files.
   - Add minimal diagnostics fallback when configs are missing.
4. Validation + handoff
   - Run implementation-gate.
   - Update checklists/mirrors with manifest evidence.
   - Capture subagent (review) manifest.

## Risks & Mitigations
- Pipeline source-of-truth drift.
  - Mitigation: single config source with package fallback.
- Command portability regressions.
  - Mitigation: rely on CODEX_ORCHESTRATOR_PACKAGE_ROOT and existing env wiring.

## Next Review
- Date: TBD
- Agenda: confirm pipeline source consolidation and manifest evidence.
