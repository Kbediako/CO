# Action Plan - DevTools Readiness + Orchestrator Usage Discipline (Task 0917)

## Status Snapshot
- Current Phase: Implementation in progress
- Run Manifest Link: `.runs/0917-devtools-readiness-orchestrator-usage/cli/2025-12-29T22-15-44-073Z-e5467cda/manifest.json`
- Metrics / State Snapshots: `.runs/0917-devtools-readiness-orchestrator-usage/metrics.json`, `out/0917-devtools-readiness-orchestrator-usage/state.json`
- Approvals / Escalations: record in `tasks/index.json`

## Evidence Notes
- `metrics.json` is NDJSON (one JSON object per line; parse line-by-line).
- `out/0917-devtools-readiness-orchestrator-usage/state.json` is generated by metrics aggregation.

## Milestones & Tasks
1. Planning + docs alignment
   - Draft PRD/tech spec/action plan/checklist/mini-spec.
   - Capture docs-review manifest and update mirrors.
   - Update `tasks/index.json` gate metadata after approvals.
2. Implementation (DevTools readiness)
   - Extend `doctor` with MCP config detection and readiness states.
   - Add devtools setup helper with explicit confirmation gates.
   - Add preflight checks to devtools-enabled pipelines (hard-fail, no fallback).
3. Implementation (orchestrator usage discipline)
   - Update SOPs and agent docs to mandate orchestrator usage + subagent delegation for scoped work.
   - Add a concise rubric for when direct commands are acceptable.
4. Validation + rollout
   - Add tests for readiness detection and setup flows.
   - Update README/AGENTS docs with setup steps.
   - Run implementation gate and capture evidence.

## Risks & Mitigations
- Config detection may miss user-specific paths.
  - Mitigation: check `CODEX_HOME` and default `~/.codex/config.toml`, and emit clear fallback instructions.
- Setup helper could prompt unexpectedly in CI.
  - Mitigation: require explicit flags for writes and default to no-op.
- SOP changes may be ignored by future agents.
  - Mitigation: add clear acceptance criteria and add to checklists.

## Next Review
- Date: 2026-01-13
- Agenda: confirm devtools readiness UX, setup helper behavior, and SOP adoption.
