# Action Plan - Refactor Plan Implementation (Task 0920)

## Status Snapshot
- Current Phase: Phase 1 (Quick wins) complete
- Run Manifest Link: `.runs/0920-refactor-plan-implementation/cli/2025-12-30T22-52-59-791Z-dd3e243a/manifest.json`
- Approvals / Escalations: record in `tasks/index.json`

## Evidence Notes
- `metrics.json` is NDJSON (one JSON object per line; parse line-by-line).
- `out/<task-id>/state.json` is generated by metrics aggregation.

## Milestones & Tasks
1. Planning + collateral
   - Draft PRD/tech spec/action plan/checklist.
   - Create mini-spec stub under `tasks/specs/`.
   - Update `tasks/index.json` and `docs/TASKS.md` mirrors.
   - Capture docs-review manifest.
2. Phase 1: Quick wins
   - Consolidate pipeline stage definitions.
   - Implement checklist mirror automation.
   - Consolidate legacy MCP wrapper resolution.
3. Phase 2: Structural consolidation
   - Simplify `orchestrator/` vs `packages/orchestrator/` boundaries.
   - Reduce `packages/shared` footprint.
4. Phase 3: Optional modularization
   - Modularize optional modules with compatibility shims.
   - Validate all guardrails and update docs.
5. Validation + handoff
   - Run implementation-gate per phase.
   - Update checklists and evidence paths.

## Risks & Mitigations
- Pipeline source-of-truth conflicts.
  - Mitigation: land a single authoritative pipeline definition and remove duplicates only after parity tests.
- Checklist automation breaks unmanaged sections.
  - Mitigation: introduce managed blocks incrementally and document them.
- Optional module extraction breaks integrations.
  - Mitigation: use feature flags and dynamic imports with a deprecation window.

## Next Review
- Date: TBD
- Agenda: confirm Phase 1 completion and guardrail status.
